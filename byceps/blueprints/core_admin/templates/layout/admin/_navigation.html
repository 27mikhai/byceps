{%- from 'macros/admin.html' import render_navigation_brand, render_navigation_global, render_navigation_party with context %}


{%- if g.current_user.has_permission(AdminPermission.access) %}

<section>
  <h1>Global</h1>
{{ render_navigation_global(current_page) }}
</section>

<section>
{%- if brand %}
  <h1><small>Marke</small><br>{{ brand.title }}</h1>
{{ render_navigation_brand(brand, current_page) }}
{%- else %}
  <h1>Marken</h1>
  <nav class="main">
    {%- if all_brands %}
    <ol>
      {%- for brand in all_brands|sort(attribute='title') %}
      <li><a href="{{ url_for('admin_dashboard.view_brand', brand_id=brand.id) }}" class="nav-item"><span class="nav-item-label">{{ brand.title }}</span></a></li>
      {%- endfor %}
    </ol>
    {%- else %}
    <p>{{ 'keine'|dim }}</p>
    {%- endif %}
  </nav>
{%- endif %}
</section>

{%- if party %}
<section>
  <h1><small>Party</small><br>{{ party.title }}</h1>
{{ render_navigation_party(party, current_page) }}
</section>
{%- elif brand %}
<section>
  <h1>Partys</h1>
  <nav class="main">
    {%- if brand.parties %}
    <ol>
    {%- for party in brand.parties|sort(attribute='starts_at', reverse=True) %}
      <li>
        <a href="{{ url_for('admin_dashboard.view_party', party_id=party.id) }}" class="nav-item">
          <span class="nav-item-label">
          {%- if party.is_archived -%}
            {{ party.title|dim }}
          {%- else -%}
            {{ party.title }}
          {%- endif -%}
          </span>
        </a>
      </li>
    {%- endfor %}
    </ol>
    {%- else %}
    <p>{{ 'keine'|dim }}</p>
    {%- endif %}
  </nav>
</section>
{%- endif %}

{%- endif %}
