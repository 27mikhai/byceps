{%- from 'macros/icons.html' import render_icon %}
{%- from 'macros/user.html' import render_user_screen_name %}
{%- from 'macros/user_avatar.html' import render_user_avatar_32 %}


<div class="current-user">
  {%- if g.current_user.is_active %}
  <div class="dropdown">
    <a href="{{ url_for('user_settings.view') }}" class="dropdown-toggle">
      {{ render_user_avatar_32(g.current_user) }}
      {{ render_icon('chevron-down') }}
    </a>
    <ol class="dropdown-menu dropdown-menu--right">
      <li>
        <span class="dropdown-label label-and-name">
          <span class="label">Angemeldet als</span>
          <span class="name">{{ render_user_screen_name(g.current_user) }}</span>
        </span>
      </li>
      <li class="dropdown-divider"></li>
{%- include 'layout/_current_user_menu_items.html' %}
      <li class="dropdown-divider"></li>
      <li><a class="dropdown-item" data-action="logout" href="{{ url_for('authentication.logout', _method='POST') }}">{{ render_icon('log-out') }} abmelden</a></li>
    </ol>
  </div>
  {%- else %}
  <div>
    <a href="{{ url_for('authentication.login_form') }}" class="button button--outlined">{{ render_icon('log-in') }} <span>Anmelden</span></a>
  </div>
  {%- endif %}
</div>
