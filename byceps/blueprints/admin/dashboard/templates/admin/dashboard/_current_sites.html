{% from 'macros/admin/brand.html' import render_brand_avatar %}
{% from 'macros/admin/dashboard.html' import render_cell %}


<div class="row row--space-between">
  <div class="column-auto">
    <div class="dashboard-section-title">{{ _('Current Sites') }}</div>
  </div>
  <div class="column-auto">
    <a class="dashboard-section-link" href="{{ url_for('site_admin.index_for_brand', brand_id=brand.id) if brand|default else url_for('site_admin.index') }}">{{ _('All sites') }} &rarr;</a>
  </div>
</div>

<div class="grid">

{%- if current_sites %}
  {%- for site in current_sites|sort(attribute='title') %}
    {%- call render_cell(href=url_for('admin_dashboard.view_site', site_id=site.id)) %}
  <div class="row">
    <div class="column-auto">
      {{ render_brand_avatar(site.brand, '40') }}
    </div>
    <div class="column-auto column-auto--grow">
      <div>{{ site.title }}</div>
      <div class="supplement">{{ site.server_name }}</div>
    </div>
  </div>
    {%- endcall %}
  {%- endfor %}
{%- else %}
  {%- call render_cell() %}
  <div style="display: grid; height: 100%; place-items: center;">{{ _('No current sites')|dim }}</div>
  {%- endcall %}
{%- endif %}

</div>
