{% extends 'layout/admin/base.html' %}
{% from 'macros/admin.html' import render_backlink %}
{% from 'macros/forms.html' import form_buttons, form_field %}
{% set current_page = 'webhook_admin' %}
{% set page_title = _('Edit Webhook') %}

{% block before_body %}
{{ render_backlink(url_for('.index'), _('Webhooks')) }}
{%- endblock %}

{% block body %}

  <h1>{{ page_title }}</h1>

  <form action="{{ url_for('.update', webhook_id=webhook.id) }}" method="post">
    {{ form_field(form.description, autofocus='autofocus') }}
    {{ form_field(form.format) }}
    {{ form_field(form.url) }}
    {{ form_field(form.text_prefix) }}
    {{ form_field(form.extra_fields, note=_('Valid JSON or empty')) }}
    {{ form_field(form.enabled) }}
    <div class="mb">
      <label class="form-label">{{ _('Selectors') }}</label>
      <div class="form-control-checkboxes">
        <fieldset>
          <ul>
          {%- for event_name in event_names|sort %}
            {%- with field = form.get_field_for_event_name(event_name) %}
            <li><label class="form-check-label">{{- field() }} {{ event_name }}</label></li>
            {%- endwith %}
          {%- endfor %}
          </ul>
        </fieldset>
      </div>
    </div>

    {{ form_buttons(_('Save')) }}
  </form>

{%- endblock %}
