{% extends 'layout/base.html' %}
{% from 'macros/board.html' import render_flag_new %}
{% from 'macros/datetime.html' import render_date_long, render_datetime %}
{% set title = 'Dashboard' %}

{% block head %}
  <style>
    .items li + li {
      margin-top: 0.75rem;
    }

    .item-meta {
      font-size: 0.6875rem; /* 11px / 16px */
      opacity: 0.5;
    }
  </style>
{%- endblock %}

{% block body %}

  <div class="row row--space-between">
    <div class="column-auto" style="width: 50%;">

      <h2>News</h2>
      {%- if news_headlines %}
      <ol class="items">
        {%- for headline in news_headlines %}
        <li>
          <a class="disguised" href="{{ url_for('news.view', slug=headline.slug) }}">{{ headline.title }}</a>
          <div class="item-meta">{{ render_date_long(headline.published_at|utc_to_local_tz) }}</div>
        </li>
        {%- endfor %}
      </ol>
      {%- else %}
      <p class="dimmed">Es gibt noch keine News.</p>
      {%- endif %}

    </div>
    <div class="column-auto" style="width: 50%;">

      <h2>Forum</h2>
      {%- if board_topics %}
      <ol class="items">
        {%- for topic in board_topics %}
        <li>
          <a class="disguised{% if topic.hidden %} dimmed{% endif %}" href="{{ url_for('board.topic_view', topic_id=topic.id) }}">
            {{ topic.title }}
            {%- if topic.contains_unseen_postings %} {{ render_flag_new() }}{% endif %}
          </a>
          <div class="item-meta">
            {{ render_datetime(topic.last_updated_at|utc_to_local_tz) }}
            &middot;
            {{ topic.category.title }}
          </div>
        </li>
        {%- endfor %}
      </ol>
      {%- else %}
      <p class="dimmed">Es gibt noch keine Themen im Forum.</p>
      {%- endif %}

    </div>
  </div>{# .row #}

{%- endblock %}
