{%- from 'macros/misc.html' import render_tag %}

<h2>{{ _('Guest Servers') }}</h2>

{%- if guest_servers %}
<table class="index wide">
  <thead>
    <tr>
      <th>{{ _('Status') }}</th>
      <th>{{ _('IP address') }}</th>
      <th>{{ _('Hostname') }}</th>
    </tr>
  </thead>
  <tbody>
    {%- for server in guest_servers %}
      {%- for address in server.addresses %}
    <tr>
        {%- if loop.first %}
      <td colspan="{{ server.addresses|length }}">{{ render_tag(_('approved'), class='color-success') if server.approved else render_tag(_('pending'), class='color-warning') }}</td>
        {%- endif %}
      <td>{% if address.ip_address %}<span class="monospace">{{ address.ip_address }}</span>{% else %}{{ render_tag(_('none'), class='color-disabled') }}{% endif %}</td>
      <td>{% if address.hostname %}<span class="monospace">{{ address.hostname }}{% if guest_server_setting.domain %}.{{ guest_server_setting.domain }}{% endif %}</span>{% else %}{{ _('not given')|dim }}{% endif %}</td>
    </tr>
      {%- endfor %}
    {%- endfor %}
  </tbody>
</table>
<details>
  <summary class="mt">{{ _('Further Settings') }}</summary>
  <table class="index mt wide">
    <tr>
      <th>{{ _('Netmask') }}</th>
      <td>
        {%- if guest_server_setting.netmask %}
        <span class="monospace">{{ guest_server_setting.netmask }}
        {%- else %}
        {{ _('not specified')|dim }}
        {%- endif %}
      </td>
    </tr>
    <tr>
      <th>{{ _('Gateway') }}</th>
      <td>
        {%- if guest_server_setting.gateway %}
        <span class="monospace">{{ guest_server_setting.gateway }}
        {%- else %}
        {{ _('not specified')|dim }}
        {%- endif %}
      </td>
    </tr>
    <tr>
      <th>{{ _('DNS servers') }}</th>
      <td>
        {%- if guest_server_setting.dns_servers %}
          {%- for dns_server in guest_server_setting.dns_servers %}
        <span class="monospace">{{ dns_server }}</span>{% if not loop.last %}, {% endif %}
          {%- endfor %}
        {%- else %}
        {{ _('not specified')|dim }}
        {%- endif %}
    </tr>
  </table>
</details>
{%- else %}
<p class="dimmed">{{ _('No servers registered.') }}</p>
{%- endif %}

<div class="button-row button-row--center">
  <a class="button" href="{{ url_for('guest_server.create_form') }}">{{ _('Register guest server') }}</a>
</div>
