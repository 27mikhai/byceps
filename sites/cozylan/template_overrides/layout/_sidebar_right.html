{%- if g.party is defined %}
<div class="sidebar-section">
  <h3>{{ g.party.title }}</h3>
  {{ format_date(g.party.starts_at, 'medium') }}â€“{{ format_date(g.party.ends_at, 'medium') }}
</div>
{%- endif %}

{%- if ticket_sale_stats is defined %}
<div class="sidebar-section">
  <h3>{{ _('Tickets') }}</h3>

  {%- with tickets_total_max_specified = (ticket_sale_stats.tickets_max is not none) %}
    {%- with sold_out = tickets_total_max_specified and ticket_sale_stats.tickets_sold >= ticket_sale_stats.tickets_max %}

      {%- if tickets_total_max_specified %}
  <div class="progress">
    <div class="progress-bar" style="width: calc(100% * {{ ticket_sale_stats.tickets_sold }} / {{ ticket_sale_stats.tickets_max }});"></div>
  </div>

        {%- if sold_out %}
        <div><strong>{{ _('Sold out!') }}</strong></div>
        {%- endif %}
      {%- endif %}

  {{ format_number(ticket_sale_stats.tickets_sold) }}
        {%- if tickets_total_max_specified %}
  / {{ format_number(ticket_sale_stats.tickets_max) }}
        {%- endif %}
  <br>{{ _('tickets paid') }}

    {%- if not sold_out %}
    <p><a class="button color-primary" style="font-size: 0.875rem;" href="/shop/order">{{ _('Order tickets') }}</a></p>
    {%- endif %}

    {%- endwith %}
  {%- endwith %}
</div>
{%- endif %}

{%- if seat_utilization is defined %}
<div class="sidebar-section">
  <h3>{{ _('Seats') }}</h3>

  <div class="progress">
    <div class="progress-bar" style="width: calc(100% * {{ seat_utilization.occupied }} / {{ seat_utilization.total }});"></div>
  </div>

  {{ format_number(seat_utilization.occupied) }}
  / {{ format_number(seat_utilization.total) }}
  <br>{{ _('seats occupied') }}
</div>
{%- endif %}

<div class="sidebar-section">
  <h3>Sponsoren</h3>
</div>
