{% extends 'layout/base.html' %}
{% from 'macros/datetime.html' import render_datetime %}
{% from 'macros/user.html' import render_user_link %}
{% set current_page = 'user_admin' %}
{% set title = 'Benutzer' %}

{% block body %}

  <h1>{{ title }}</h1>

  <table class="index wide">
    <thead>
      <tr>
        <th>Handle</th>
        <th>voller Name</th>
        <th>Erstellt</th>
        <th>Legacy ID</th>
        <th>aktiv</th>
      </tr>
    </thead>
    <tbody>
      {%- for user in users|sort(attribute='created_at', reverse=True) %}
      <tr>
        <td>{{ render_user_link(user) }}</td>
        <td>{% if user.detail.full_name %}{{ user.detail.full_name }}{% endif %}</td>
        <td>{{ render_datetime(user.created_at) }}</td>
        <td>{% if user.legacy_id %}{{ user.legacy_id }}{% endif %}</td>
        <td><span class="icon-{{ 'enabled' if user.enabled else 'disabled' }}"></span></td>
      </tr>
      {%- endfor %}
      <tr>
    </tbody>
  </table>

  <ol class="actions">
    <li><a href="{{ url_for('user.create_form') }}"><span class="icon-add"></span> Benutzerkonto erstellen</a></li>
  </ol>

{%- endblock body %}
