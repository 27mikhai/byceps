{% extends 'layout/base.html' %}
{% from 'macros/datetime.html' import render_datetime %}
{% from 'macros/icons.html' import render_icon %}
{% from 'macros/user.html' import render_user_avatar %}
{% set current_page = 'user' %}
{% set title = 'Meine Daten' %}

{% block body %}

  <h1>{{ title }}</h1>

  <ol class="actions" style="margin: 0;">
    <li><a href="{{ url_for('.view', id=user.id) }}">{{ render_icon('view') }} öffentliches Profil ansehen</a></li>
  </ol>

  <h2>Benutzerkonto</h2>
  <table class="index">
    <tr>
      <th>Erstellt</th>
      <td>{{ render_datetime(user.created_at) }}</td>
    </tr>
    <tr>
      <th>Benutzername</th>
      <td>{{ user.screen_name }}</td>
    </tr>
    <tr>
      <th>E-Mail-Adresse</th>
      <td>{{ user.email_address }}</td>
    </tr>
    <tr>
      <th>Avatar</th>
      <td>
      {%- if user.has_avatar_image -%}
        {{ render_user_avatar(user) }}
      {%- else -%}
        <em>nicht hinterlegt</em>
      {%- endif -%}
      {%- if g.current_user == user %}
        <ol class="actions" style="display: block; margin: 0.5rem 0 0 0;">
          <li><a href="{{ url_for('.update_avatar_image_form') }}">{{ render_icon('upload') }} Avatar hochladen</a></li>
          {%- if user.has_avatar_image -%}
          <li><a id="avatar-delete" href="{{ url_for('.delete_avatar_image', _method='DELETE') }}">{{ render_icon('delete') }} Avatar entfernen</a></li>
          {%- endif %}
        </ol>
      {%- endif %}
      </td>
    </tr>
  </table>

  <h2>Persönliche Daten</h2>
  <ol class="actions" style="margin: 0;">
    <li><a href="{{ url_for('.update_details_form') }}">{{ render_icon('edit') }} Persönliche Daten bearbeiten</a></li>
  </ol>
  <table class="index">
    <tr>
      <th>Voller Name</th>
      <td>{% if user.detail.full_name %}{{ user.detail.full_name }}{% endif %}</td>
    </tr>
    <tr>
      <th>Anschrift</th>
      <td>
        {%- if user.detail.street %}{{ user.detail.street }}<br/>{% endif -%}
        {%- if user.detail.zip_code %}{{ user.detail.zip_code }}{% endif -%}
        {%- if user.detail.city %}{{ user.detail.city }}{% endif -%}
      </td>
    </tr>
  </table>

{%- endblock body %}
